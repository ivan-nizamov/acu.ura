<dl class="border-muted flex flex-col overflow-hidden rounded-xl border">
  <div class="bg-muted p-s justify-center border-b border-muted flex">
    <dt class="text-step-2 font-bold">Program de Lucru</dt>
  </div>

  <!-- Make the container a 2-col grid with a fixed first column -->
  <div
    id="schedule-container"
    class="p-m grid gap-x-s gap-y-xs grid-cols-[clamp(7ch,20vw,15ch)_1fr]"
    data-endpoint="https://script.google.com/macros/s/AKfycbznyNFX0j0t23zZWU217vnAZBDaM0qTsXRSmztuH8BnN9C3-P7I3qfOEGoFXx20w14l8g/exec"
  >
    <div class="animate-pulse text-step-2 font-bold col-span-2">Imediat...</div>
  </div>
</dl>

<script>
  const container = document.getElementById("schedule-container");
  const endpoint = container?.dataset.endpoint;

  if (container && endpoint) {
    fetch(endpoint)
      .then((res) => res.json())
      .then((data) => {
        const scheduleHtml = data.data
          .map(
            (schedule) => `
              <dt class="text-step-1 font-semibold">${schedule.day}</dt>
              <dd class="text-step-1 font-semibold tabular-nums">
                ${schedule.hours
                  .split(" și ")
                  .map((time, i, arr) => `
                    ${time}${i < arr.length - 1 ? '<span class="mx-xs text-text text-step-2"> și </span>' : ""}
                  `)
                  .join("")}
              </dd>
            `
          )
          .join("");

        container.innerHTML = scheduleHtml;
      })
      .catch((error) => {
        container.innerHTML =
          '<div class="text-red-500 text-step-2 font-bold col-span-2">Failed to load schedule</div>';
        console.error("Error loading schedule:", error);
      });
  }
</script>
