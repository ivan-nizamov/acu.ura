---
import type { HTMLAttributes } from "astro/types";
import { tv } from "tailwind-variants";

type Props = HTMLAttributes<"div"> & {
  /**
   * Variant of the item media
   * @default "default"
   */
  variant?: "default" | "icon" | "image";
};

export const itemMedia = tv({
  base: [
    "flex shrink-0 items-center justify-center gap-[var(--space-2xs)] [&_svg]:pointer-events-none",
    "group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start",
  ],
  variants: {
    variant: {
      default: "bg-transparent",
      icon: "bg-muted size-[var(--space-l)] rounded-sm border [&_svg:not([class*='size-'])]:size-[var(--space-s)]",
      image: "size-[var(--space-l)] overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover",
    },
  },
  defaultVariants: {
    variant: "default",
  },
});

const { variant = "default", class: className, ...rest } = Astro.props;
---

<div
  class={itemMedia({ variant, class: className })}
  data-slot="item-media"
  data-variant={variant}
  {...rest}
>
  <slot />
</div>
